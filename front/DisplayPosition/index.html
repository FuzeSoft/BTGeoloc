<!doctype html>

<head>
    <meta charset="utf-8">
    <title>GÃ©oloc indoor</title>

	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
	<style>#slider { margin: 10px; }	</style>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.1/svg.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>

<body>
	<h1 id="P1"></h1>
	<h1 id="P2"></h1>
	<h1 id="P3"></h1>
	<h1 id="P4"></h1>
	<h1 id="P5"></h1>
	<h1 id="P6"></h1>
	<h1 id="P7"></h1>

	<p id="m1"></p>
	<p id="m2"></p>

	<div id="drawing">

	</div>

	<div id="slider1">

	</div>

	<div id="slider2">

	</div>


	<script>



		var Z1B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.305,0.075,0.055,0.14,10.425,5.39,10.205,3.495,4.135,5.57,1.76,2.15,12.475,12.425,15.655,10.495,3.26,0.91,0.34,0.15,0.19,0.22,0.115,0.04,0.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z2B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.025,0.025,2.555,0.285,7.36,13.96,22.155,5.01,22.44,10.31,3.855,1.875,3.18,1,1.395,1.245,0.445,0.54,1.63,0.55,0.095,0.03,0.02,0.01,0.005,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var Z3B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.12,6.17,7.77,11.7,3.5,3.39,13.96,3.86,16.21,30.01,2.03,1.06,0.12,0.06,0.02,0.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var Z4B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.04,6.33,7.71,9.18,15.53,5.32,4.97,2,4.58,0.45,2.68,1.78,7.87,4.38,3.92,5.88,8.05,6.19,1.49,0.72,0.59,0.28,0.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var Z5B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.76,2.58,7.81,18,7.69,12.87,9.69,2.57,10,7.47,3.5,4.93,2.15,2.35,4.18,1.55,1,0.59,0.29,0.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var Z6B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.01,1.15,6.12,6.03,5.28,6.58,5.77,8.93,6.67,2.61,10.2,12.5,4.73,4.67,3.07,5.26,2.43,3.11,0.11,0.27,0.24,0.51,1.47,0.9,0.11,0.17,0.42,0.43,0.16,0.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var Z7B1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.02,0.04,0.19,17.95,13.14,38.23,35.44,12.01,16.67,38.12,3.2,6.65,0.89,1.64,1.63,5.95,1.6,0.51,0.24,0.39,1.39,1.65,2.27,0.15,0.01,0,0.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var Dsum = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.12,6.17,7.77,11.7,3.5,3.39,13.96,3.86,16.21,30.01,2.03,1.06,0.12,0.06,0.02,0.02,0.01,1.16,6.14,6.07,5.47,24.555,18.945,50.06,48.8,29.745,50.16,99.49,26.23,56.745,37.765,27.16,24.825,26.37,9.21,32.52,26,24.42,24.705,17.64,12.38,6.425,2.88,2.23,1.27,0.55,0.05,0.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

        var Z1B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0001,0.1075,0.1507,0.2233,0.1871,0.2122,0.0499,0.062,0.006,0.0012,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z2B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0089,0.2222,0.0683,0.1028,0.1994,0.0997,0.0079,0.0407,0.0236,0.0022,0.0002,0.0048,0.056,0.046,0.0455,0.0347,0.0239,0.0107,0.0022,0.0002,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z3B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0002,0.01,0.0189,0.1091,0.1348,0.1169,0.0702,0.0925,0.0651,0.0763,0.0363,0.0392,0.0503,0.0518,0.047,0.0309,0.0142,0.0173,0.0127,0.0054,0.0009,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z4B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00001,0.00689,0.00711,0.00927,0.00572,0.00097,0.00236,0.01002,0.00665,0.01253,0.01338,0.0013,0.00433,0.00776,0.00398,0.00304,0.00181,0.0022,0.00065,0.00002,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z5B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0221,0.0323,0.0245,0.0785,0.1367,0.0322,0.2051,0.1112,0.0918,0.0699,0.0727,0.0469,0.0318,0.016,0.011,0.0085,0.0058,0.0028,0.0002,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z6B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0012,0.0977,0.0466,0.0664,0.1058,0.2151,0.0883,0.1398,0.025,0.0347,0.0223,0.015,0.0197,0.0168,0.0066,0.0142,0.007,0.0091,0.0103,0.0102,0.011,0.0118,0.0058,0.0063,0.0056,0.0047,0.0025,0.0005,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var Z7B2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0002,0.0001,0.002,0.0041,0.0351,0.0831,0.1069,0.0633,0.1574,0.0437,0.104,0.1795,0.1015,0.044,0.0297,0.0105,0.0074,0.0181,0.0077,0.0014,0.0002,0.0001,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];


        var mesure = 70;

        var draw = SVG('drawing').size(1300,1000);
		draw.rect(1300, 1000).fill('#E0E0E0').stroke('#000000').stroke({width:20});
		draw.line(500,0,500,500).stroke('#000000').stroke({width:10});
		draw.line(150,500,500,500).stroke('#000000').stroke({width:10});
		draw.line(700,500,1300,500).stroke('#000000').stroke({width:10});
		draw.line(700,125,1050,125).stroke('#000000').stroke({width:10});
		draw.line(700,250,1050,250).stroke('#000000').stroke({width:10});

		function showCoordinates(x, y){
			draw.circle(30).move(x,y);
		}

		function calculateProbability(zone, m1, m2) {
		    var p;
            switch (zone) {
				case 1:
				    p = Z1B1[m1]*(Z1B2[m2]);
				    break;
				case 2:
				    p = (Z2B1[m1])*(Z2B2[m2]);
				    break;
				case 3:
				    p = (Z3B1[m1])*(Z3B2[m2]);
				    break;
				case 4:
				    p = (Z4B1[m1])*(Z4B2[m2]);
				    break;
				case 5:
				    p = (Z5B1[m1])*(Z5B2[m2]);
				    break;
				case 6:
				    p = (Z6B1[m1])*(Z6B2[m2]);
				    break;
				case 7:
				    p = (Z7B1[m1])*(Z7B2[m2]);
				    break;
            }
            return p/(calculateSum(m1,m2));
		}

		function calculateSum(m1, m2){
		    return (Z1B1[m1])*(Z1B2[m2]) +
				(Z2B1[m1])*(Z2B2[m2]) +
				(Z3B1[m1])*(Z3B2[m2]) +
                (Z4B1[m1])*(Z4B2[m2]) +
                (Z5B1[m1])*(Z5B2[m2]) +
                (Z6B1[m1])*(Z6B2[m2]) +
                (Z7B1[m1])*(Z7B2[m2]);
		}
		showCoordinates(200,200);


        var zone1 = draw.rect(400,400).move(850,550).fill("#FF0000").opacity(calculateProbability(1,70));
        var zone2 = draw.rect(100,300).move(100,600).fill("#FF0000").opacity(calculateProbability(2,70));
        var zone3 = draw.rect(200,100).move(500,700).fill("#FF0000").opacity(calculateProbability(3,70));
        var zone4 = draw.rect(300,100).move(100,100).fill("#FF0000").opacity(calculateProbability(4,70));
        var zone5 = draw.rect(200,200).move(500,0).fill("#FF0000").opacity(calculateProbability(5,70));
        var zone6 = draw.rect(200,200).move(500,400).fill("#FF0000").opacity(calculateProbability(6,70));
        var zone7 = draw.rect(200,100).move(200,900).fill("#FF0000").opacity(calculateProbability(7,70));
		function colorZones(m1, m2){
		    zone1.opacity(calculateProbability(1,m1,m2));
		    zone2.opacity(calculateProbability(2,m1,m2));
		    zone3.opacity(calculateProbability(3,m1,m2));
		    zone4.opacity(calculateProbability(4,m1,m2));
		    zone5.opacity(calculateProbability(5,m1,m2));
		    zone6.opacity(calculateProbability(6,m1,m2));
		    zone7.opacity(calculateProbability(7,m1,m2));
		}

		//colorZones(parseInt(window.location.search.substr(1)));
		colorZones(70,80);


        $("#slider1").slider();
        $("#slider1").slider("value", 70);
        $("#slider1").slider({
			slide: function(event, ui){
            			colorZones(ui.value, $("#slider2").slider("value"));

                document.getElementById("P1").innerHTML = calculateProbability(1,ui.value, $("#slider2").slider("value"));
                document.getElementById("P2").innerHTML = calculateProbability(2,ui.value, $("#slider2").slider("value"));
                document.getElementById("P3").innerHTML = calculateProbability(3,ui.value, $("#slider2").slider("value"));
                document.getElementById("P4").innerHTML = calculateProbability(4,ui.value, $("#slider2").slider("value"));
                document.getElementById("P5").innerHTML = calculateProbability(5,ui.value, $("#slider2").slider("value"));
                document.getElementById("P6").innerHTML = calculateProbability(6,ui.value, $("#slider2").slider("value"));
                document.getElementById("P7").innerHTML = calculateProbability(7,ui.value, $("#slider2").slider("value"));

                document.getElementById("m1").innerHTML = ui.value;
					}});

        $("#slider2").slider();
        $("#slider2").slider("value", 80);
        $("#slider2").slider({
            slide: function(event, ui){
                colorZones(ui.value, $("#slider1").slider("value"));

                document.getElementById("P1").innerHTML = calculateProbability(1,ui.value, $("#slider1").slider("value"));
                document.getElementById("P2").innerHTML = calculateProbability(2,ui.value, $("#slider1").slider("value"));
                document.getElementById("P3").innerHTML = calculateProbability(3,ui.value, $("#slider1").slider("value"));
                document.getElementById("P4").innerHTML = calculateProbability(4,ui.value, $("#slider1").slider("value"));
                document.getElementById("P5").innerHTML = calculateProbability(5,ui.value, $("#slider1").slider("value"));
                document.getElementById("P6").innerHTML = calculateProbability(6,ui.value, $("#slider1").slider("value"));
                document.getElementById("P7").innerHTML = calculateProbability(7,ui.value, $("#slider1").slider("value"));

                document.getElementById("m2").innerHTML = ui.value;
            }});

	</script>
</body>